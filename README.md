TODO:
move pi code to own file
